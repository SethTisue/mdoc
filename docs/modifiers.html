<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Modifiers · mdoc</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Code fences with &lt;code&gt;scala mdoc&lt;/code&gt; can have different &amp;quot;modifiers&amp;quot;, which control how&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Modifiers · mdoc"/><meta property="og:type" content="website"/><meta property="og:url" content="https://scalameta.org/mdoc/mdoc/index.html"/><meta property="og:description" content="&lt;p&gt;Code fences with &lt;code&gt;scala mdoc&lt;/code&gt; can have different &amp;quot;modifiers&amp;quot;, which control how&lt;/p&gt;
"/><meta property="og:image" content="https://scalameta.org/mdoc/mdoc/img/scalameta-logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://scalameta.org/mdoc/mdoc/img/scalameta-logo.png"/><link rel="shortcut icon" href="/mdoc/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><link rel="alternate" type="application/atom+xml" href="https://scalameta.org/mdoc/mdoc/blog/atom.xml" title="mdoc Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://scalameta.org/mdoc/mdoc/blog/feed.xml" title="mdoc Blog RSS Feed"/><link rel="stylesheet" href="/mdoc/css/custom.css"/><link rel="stylesheet" href="/mdoc/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/mdoc/"><img class="logo" src="/mdoc/img/mdoc-logo.png" alt="mdoc"/><h2 class="headerTitleWithLogo">mdoc</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/mdoc/docs/installation.html" target="_self">Docs</a></li><li class=""><a href="/mdoc/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/scalameta/mdoc" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Overview</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul><li class="navListItem"><a class="navItem" href="/mdoc/docs/installation.html">Installation</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/mdoc/docs/modifiers.html">Modifiers</a></li><li class="navListItem"><a class="navItem" href="/mdoc/docs/why.html">Why mdoc?</a></li><li class="navListItem"><a class="navItem" href="/mdoc/docs/tut.html">Coming from tut</a></li><li class="navListItem"><a class="navItem" href="/mdoc/docs/docusaurus.html">Docusaurus</a></li><li class="navListItem"><a class="navItem" href="/mdoc/docs/js.html">Scala.js</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/scalameta/mdoc/edit/master/docs/modifiers.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Modifiers</h1></header><article><div><span><p>Code fences with <code>scala mdoc</code> can have different &quot;modifiers&quot;, which control how
the code should be evaluated or rendered. A code fence can only have one
modifier.</p>
<h2><a class="anchor" aria-hidden="true" id="default"></a><a href="#default" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default</h2>
<p>The default modifier compiles and executes the code fence as normal</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc
val x = <span class="hljs-number">1</span>
val y = <span class="hljs-number">2</span>
x + y
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">```scala
val x = <span class="hljs-number">1</span>
<span class="hljs-comment">// x: Int = 1</span>
val y = <span class="hljs-number">2</span>
<span class="hljs-comment">// y: Int = 2</span>
x + y
<span class="hljs-comment">// res0: Int = 3</span>
```
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="silent"></a><a href="#silent" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Silent</h2>
<p>The <code>silent</code> modifier is identical to the default modifier except that it hides
the evaluated output. The input code fence renders unchanged.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:silent
val x = <span class="hljs-number">1</span>
val y = <span class="hljs-number">2</span>
x + y
```
```scala mdoc
x + y
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">```scala
val x = <span class="hljs-number">1</span>
val y = <span class="hljs-number">2</span>
x + y
```

```scala
x + y
<span class="hljs-comment">// res1: Int = 3</span>
```
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fail"></a><a href="#fail" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fail</h2>
<p>The <code>fail</code> modifier asserts that the code block will not compile. The rendered
output contains the type error message.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:fail
val x: Int = <span class="hljs-string">""</span>
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">```scala
val x: Int = <span class="hljs-string">""</span>
<span class="hljs-comment">// error: type mismatch;</span>
<span class="hljs-comment">//  found   : String("")</span>
<span class="hljs-comment">//  required: Int</span>
<span class="hljs-comment">// val x: Int = ""</span>
<span class="hljs-comment">//              ^^</span>
```
</code></pre>
<p>A <code>fail</code> code fence with no compile error fails the build.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:fail
val x: String = <span class="hljs-string">""</span>
```
</code></pre>
<p>Error:</p>
<pre><code class="hljs">error: modifiers.md:2:1: Expected compile error but statement typechecked successfully
<span class="hljs-section">val x: String = ""
^^^^^^^^^^^^^^^^^^</span>
</code></pre>
<blockquote>
<p>Note that <code>fail</code> does not assert that the program compiles but crashes at
runtime. To assert runtime exceptions, use the <code>crash</code> modifier.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="crash"></a><a href="#crash" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crash</h2>
<p>The <code>crash</code> modifier asserts that the code block throws an exception at runtime</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:crash
val y = ???
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">```scala
val y = ???
<span class="hljs-regexp">//</span> scala.NotImplementedError: an implementation is missing
<span class="hljs-regexp">//</span>  at scala.Predef$.<span class="hljs-variable">$qmark</span><span class="hljs-variable">$qmark</span><span class="hljs-variable">$qmark</span>(Predef.scala:<span class="hljs-number">288</span>)
<span class="hljs-regexp">//</span>  at repl.Session<span class="hljs-variable">$App</span>$<span class="hljs-variable">$anonfun</span><span class="hljs-variable">$1</span>.apply<span class="hljs-variable">$mcV</span><span class="hljs-variable">$sp</span>(modifiers.md:<span class="hljs-number">9</span>)
<span class="hljs-regexp">//</span>  at repl.Session<span class="hljs-variable">$App</span>$<span class="hljs-variable">$anonfun</span><span class="hljs-variable">$1</span>.apply(modifiers.md:<span class="hljs-number">8</span>)
<span class="hljs-regexp">//</span>  at repl.Session<span class="hljs-variable">$App</span>$<span class="hljs-variable">$anonfun</span><span class="hljs-variable">$1</span>.apply(modifiers.md:<span class="hljs-number">8</span>)
```
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="passthrough"></a><a href="#passthrough" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Passthrough</h2>
<p>The <code>passthrough</code> modifier collects the stdout and stderr output from the
program and embeds it verbatim in the markdown file.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:passthrough
<span class="hljs-meta">val</span> matrix = <span class="hljs-type">Array</span>.tabulate(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>) { (a, b) =&gt;
  <span class="hljs-meta">val</span> multiplied = (a + <span class="hljs-number">1</span>) * (b + <span class="hljs-number">1</span>)
  f<span class="hljs-string">"$multiplied%2s"</span>
}
<span class="hljs-meta">val</span> table = matrix.map(_.mkString(<span class="hljs-string">"| "</span>, <span class="hljs-string">" | "</span>, <span class="hljs-string">" |"</span>)).mkString(<span class="hljs-string">"\n"</span>)
println(s<span class="hljs-string">"""
This will be rendered as markdown.

* Bullet 1
* Bullet 2

Look at the table:

$table
"""</span>)
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">This will be rendered as markdown.

<span class="hljs-symbol">*</span> Bullet 1
<span class="hljs-symbol">*</span> Bullet 2

Look at the table:

|<span class="hljs-string">  1 </span>|<span class="hljs-string">  2 </span>|<span class="hljs-string">  3 </span>|<span class="hljs-string">  4 </span>|
|<span class="hljs-string">  2 </span>|<span class="hljs-string">  4 </span>|<span class="hljs-string">  6 </span>|<span class="hljs-string">  8 </span>|
|<span class="hljs-string">  3 </span>|<span class="hljs-string">  6 </span>|<span class="hljs-string">  9 </span>|<span class="hljs-string"> 12 </span>|
|<span class="hljs-string">  4 </span>|<span class="hljs-string">  8 </span>|<span class="hljs-string"> 12 </span>|<span class="hljs-string"> 16 </span>|
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="invisible"></a><a href="#invisible" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Invisible</h2>
<p>The <code>invisible</code> modifier evaluates the code but does not render anything. The
<code>invisible</code> modifier is equivalent to <code>passthrough</code> when the expression does not
print to stdout.</p>
<p>Before:</p>
<pre><code class="hljs">This is prose.
```scala mdoc:invisible
println(<span class="hljs-string">"I am invisible"</span>)
```
More prose.
</code></pre>
<p>After:</p>
<pre><code class="hljs">This is prose.

More prose.
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="reset"></a><a href="#reset" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reset</h2>
<p>The <code>reset</code> modifier starts a new scope where previous statements in the
document are no longer available. This can be helpful to clear existing imports
or implicits in scope.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc
<span class="hljs-keyword">implicit</span> val x: <span class="hljs-built_in">Int</span> = <span class="hljs-number">41</span>
```

```scala mdoc:reset
<span class="hljs-keyword">implicit</span> val y: <span class="hljs-built_in">Int</span> = <span class="hljs-number">42</span>
implicitly[<span class="hljs-built_in">Int</span>] // x is no longer <span class="hljs-keyword">in</span> scope
```
```scala mdoc:fail
println(x)
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">```scala
<span class="hljs-keyword">implicit</span> val x: <span class="hljs-built_in">Int</span> = <span class="hljs-number">41</span>
// x: <span class="hljs-built_in">Int</span> = <span class="hljs-number">41</span>
```

```scala
<span class="hljs-keyword">implicit</span> val y: <span class="hljs-built_in">Int</span> = <span class="hljs-number">42</span>
// y: <span class="hljs-built_in">Int</span> = <span class="hljs-number">42</span>
implicitly[<span class="hljs-built_in">Int</span>] // x is no longer <span class="hljs-keyword">in</span> scope
// res1: <span class="hljs-built_in">Int</span> = <span class="hljs-number">42</span>
```

```scala
println(x)
// error: not found: <span class="hljs-keyword">value</span> x
// println(x)
//         ^
```
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="postmodifier"></a><a href="#postmodifier" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PostModifier</h2>
<p>A <code>PostModifier</code> is a custom modifier that post-processes a compiled and
interpreted mdoc code fence. Post modifiers have access to the original code
fence text, the static types and runtime values of the evaluated Scala code, the
input and output file paths and other contextual information.</p>
<p>One example use-case for post modifiers is to render charts based on the runtime
value of the last expression in the code fence.</p>
<p><img src="/mdoc/docs/assets/evilplot.gif" alt=""></p>
<p>Extend the <code>mdoc.PostModifier</code> trait to implement a post modifier.</p>
<p>File: <a href="https://github.com/scalameta/mdoc/blob/master/mdoc-docs/src/main/scala/mdoc/docs/EvilplotModifier.scala">EvilplotModifier.scala</a></p>
<pre><code class="hljs css language-scala">package mdoc.docs

import com.cibo.evilplot.geometry.Drawable
import java.nio.file.Files
import java.nio.file.Paths
import mdoc._
import scala.meta.inputs.Position

class EvilplotModifier extends PostModifier {
  val name = "evilplot"
  def process(ctx: PostModifierContext): String = {
    val relpath = Paths.get(ctx.info)
    val out = ctx.outputFile.toNIO.getParent.resolve(relpath)
    ctx.lastValue match {
      case d: Drawable =&gt;
        Files.createDirectories(out.getParent)
        if (!Files.isRegularFile(out)) {
          d.write(out.toFile)
        }
        s"![](${ctx.info})"
      case _ =&gt;
        val (pos, obtained) = ctx.variables.lastOption match {
          case Some(variable) =&gt;
            val prettyObtained =
              s"${variable.staticType} = ${variable.runtimeValue}"
            (variable.pos, prettyObtained)
          case None =&gt;
            (Position.Range(ctx.originalCode, 0, 0), "nothing")
        }
        ctx.reporter.error(
          pos,
          s"""type mismatch:
  expected: com.cibo.evilplot.geometry.Drawable
  obtained: $obtained"""
        )
        ""
    }
  }
}

</code></pre>
<p>Next, create a resource file <code>META-INF/services/mdoc.PostModifier</code> so the post
modififer is recognized by the JVM
<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html">ServiceLoader</a>
framework.</p>
<p>File: <a href="https://github.com/scalameta/mdoc/blob/master/mdoc-docs/src/main/resources/META-INF/services/mdoc.PostModifier">mdoc.PostModifier</a></p>
<pre><code class="hljs css language-scala">mdoc.docs.<span class="hljs-type">EvilplotModifier</span>

</code></pre>
<p>As long as <code>EvilplotModifier</code> is available on the classpath, for example via
<code>libraryDependencies</code> in build.sbt, then you can use the modifier like this.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:evilplot:assets/scatterplot.png
import com.cibo.evilplot._
import com.cibo.evilplot.plot._
import com.cibo.evilplot.plot.aesthetics.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DefaultTheme</span>.</span><span class="hljs-module"><span class="hljs-identifier">_</span>
i</span></span>mport com.cibo.evilplot.numeric.Point

<span class="hljs-keyword">val</span> data = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Seq</span>.</span></span>tabulate(<span class="hljs-number">90</span>) {<span class="hljs-function"> <span class="hljs-params">i</span> =&gt;</span>
  <span class="hljs-keyword">val</span> degree = i<span class="hljs-operator"> * </span><span class="hljs-number">8</span>
  <span class="hljs-keyword">val</span> radian = math.<span class="hljs-keyword">to</span><span class="hljs-constructor">Radians(<span class="hljs-params">degree</span>)</span>
  <span class="hljs-constructor">Point(<span class="hljs-params">i</span>.<span class="hljs-params">toDouble</span>, <span class="hljs-params">math</span>.<span class="hljs-params">sin</span>(<span class="hljs-params">radian</span>)</span>)
}

<span class="hljs-constructor">ScatterPlot(<span class="hljs-params">data</span>)</span>
  .x<span class="hljs-constructor">Axis()</span>
  .y<span class="hljs-constructor">Axis()</span>
  .frame<span class="hljs-literal">()</span>
  .x<span class="hljs-constructor">Label(<span class="hljs-string">"x"</span>)</span>
  .y<span class="hljs-constructor">Label(<span class="hljs-string">"y"</span>)</span>
  .render<span class="hljs-literal">()</span>
```
</code></pre>
<p>After:</p>
<pre><code class="hljs">!<span class="hljs-selector-attr">[]</span>(assets/scatterplot.png)
</code></pre>
<p>Which renders into a scatter plot like this:</p>
<p><img src="/mdoc/docs/assets/scatterplot.png" alt=""></p>
<p>It's important that post modifiers present helpful error messages to the user in
case of failures. For example, if the last runtime value is not an EvilPlot
<code>Drawable</code> we can report the expected and obtained types with carets pointing to
the position of the last variable.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:evilplot:scatterplot.png
val message = <span class="hljs-string">"hello world!"</span>
```
</code></pre>
<p>Error:</p>
<pre><code class="hljs">error: modifiers.md:2:5:<span class="hljs-built_in"> type </span>mismatch:
  expected: com.cibo.evilplot.geometry.Drawable
  obtained: String = hello world!
val message = <span class="hljs-string">"hello world!"</span>
    ^^^^^^^
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="stringmodifier"></a><a href="#stringmodifier" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>StringModifier</h2>
<p>A <code>StringModifier</code> is a custom modifier that processes the plain text contents
of a code block, ignoring the compilation and interpretation of the Scala code.</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> mdoc.<span class="hljs-type">StringModifier</span>
<span class="hljs-keyword">import</span> mdoc.<span class="hljs-type">Reporter</span>
<span class="hljs-keyword">import</span> scala.meta.<span class="hljs-type">Input</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooModifier</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StringModifier</span> </span>{
  <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> name = <span class="hljs-string">"foo"</span>
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process</span></span>(info: <span class="hljs-type">String</span>, code: <span class="hljs-type">Input</span>, reporter: <span class="hljs-type">Reporter</span>): <span class="hljs-type">String</span> = {
    <span class="hljs-keyword">val</span> originalCodeFenceText = code.text
    <span class="hljs-keyword">val</span> isCrash = info == <span class="hljs-string">"crash"</span>
    <span class="hljs-keyword">if</span> (isCrash) <span class="hljs-string">"BOOM"</span>
    <span class="hljs-keyword">else</span> <span class="hljs-string">"OK: "</span> + originalCodeFenceText
  }
}
</code></pre>
<p>Next, create a resource file <code>META-INF/services/mdoc.StringModifier</code> so the post
modififer is recognized by the JVM
<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html">ServiceLoader</a>
framework.</p>
<p>File: <a href="https://github.com/scalameta/mdoc/blob/master/mdoc-docs/src/main/resources/META-INF/services/mdoc.StringModifier">mdoc.StringModifier</a></p>
<pre><code class="hljs css language-scala">mdoc.docs.<span class="hljs-type">FooModifier</span>
mdoc.docs.<span class="hljs-type">SbtModifier</span>
mdoc.docs.<span class="hljs-type">FileModifier</span>

</code></pre>
<p>Code blocks with the <code>mdoc:foo</code> modifier will render as follows.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:foo
Hello world!
```
</code></pre>
<p>After:</p>
<pre><code class="hljs"><span class="hljs-symbol">OK:</span> Hello world!
</code></pre>
<p>We can also add the argument <code>:crash</code> to render &quot;BOOM&quot;.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:foo:crash
Hello world!
```
</code></pre>
<p>After:</p>
<pre><code class="hljs"><span class="hljs-keyword">BOOM
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="scastie"></a><a href="#scastie" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scastie</h2>
<p>The <code>scastie</code> modifier transforms a Scala code block into a
<a href="https://scastie.scala-lang.org/">Scastie</a> snippet.</p>
<blockquote>
<p>ℹ️ This modifier will work only in environments that support embedding a
<code>&lt;script&gt;</code> tag. For example, it won't work in GitHub readmes, but it will work
when building a static website from Markdown (e.g., with
<a href="https://docusaurus.io/">Docusaurus</a>)</p>
</blockquote>
<p>You can embed an existing Scastie snippet by its id:</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:scastie:xbrvky6fTjysG32zK6kzRQ

```
</code></pre>
<p>After:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://scastie.scala-lang.org/xbrvky6fTjysG32zK6kzRQ.js?theme=light'</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>or in case of a user's snippet:</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:scastie:MasseGuillaume/CpO2s8v2Q1qGdO3vROYjfg

```
</code></pre>
<p>After:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://scastie.scala-lang.org/MasseGuillaume/CpO2s8v2Q1qGdO3vROYjfg.js?theme=light'</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<blockquote>
<p>⚠️ The empty line in the block can't be omitted due to how the Markdown parser
works</p>
</blockquote>
<p>Moreover, you can quickly translate any Scala code block block into a Scastie
snippet on the fly.</p>
<p>Before:</p>
<pre><code class="hljs">```scala mdoc:scastie
val x = <span class="hljs-number">1</span> + <span class="hljs-number">2</span>
println(x)
```
</code></pre>
<p>After:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://scastie.scala-lang.org/embedded.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">class</span>=<span class="hljs-string">'scastie-snippet-&lt;a_random_uuid&gt;'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'load'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
scastie.Embedded(<span class="hljs-string">'.scastie-snippet-&lt;a_random_uuid&gt;'</span>, {
<span class="hljs-attr">code</span>: <span class="hljs-string">`val x = 1 + 2
println(x)`</span>,
<span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
<span class="hljs-attr">isWorksheetMode</span>: <span class="hljs-literal">true</span>,
<span class="hljs-attr">targetType</span>: <span class="hljs-string">'jvm'</span>,
<span class="hljs-attr">scalaVersion</span>: <span class="hljs-string">'2.12.6'</span>
})
})</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<blockquote>
<p>⚠️ Inline snippets are slower to run than embedded ones, since they won't be
cached. You should prefer embedding existing snippets whenever possible.</p>
</blockquote>
<p>You can choose the Scastie theme when initializing the Scastie modifier:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> mdoc.modifiers.<span class="hljs-type">ScastieModifier</span>
<span class="hljs-keyword">new</span> <span class="hljs-type">ScastieModifier</span>(theme = <span class="hljs-string">"dark"</span>) <span class="hljs-comment">// default is "light"</span>
<span class="hljs-comment">// res0: ScastieModifier = StringModifier(mdoc:scastie)</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/mdoc/docs/installation.html"><span class="arrow-prev">← </span><span>Installation</span></a><a class="docs-next button" href="/mdoc/docs/why.html"><span>Why mdoc?</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#default">Default</a></li><li><a href="#silent">Silent</a></li><li><a href="#fail">Fail</a></li><li><a href="#crash">Crash</a></li><li><a href="#passthrough">Passthrough</a></li><li><a href="#invisible">Invisible</a></li><li><a href="#reset">Reset</a></li><li><a href="#postmodifier">PostModifier</a></li><li><a href="#stringmodifier">StringModifier</a></li><li><a href="#scastie">Scastie</a></li></ul></nav></div><footer class="nav-footer" id="footer" style="background-color:#7F4623"><section class="sitemap"><a href="/mdoc/" class="nav-home"><img src="/mdoc/img/mdoc-logo.png" alt="mdoc" width="66" height="58"/></a><div><h5>Docs</h5><a href="/mdoc/docs/installation.html">Get started</a></div><div><h5>Community</h5><a href="https://gitter.im/scalameta/mdoc" target="_blank">Chat on Gitter</a></div><div><h5>More</h5><a href="https://github.com/scalameta/mdoc" target="_blank">GitHub</a></div></section><section class="copyright">Copyright © 2019 mdoc developers</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5791175eba35c6626d93ae96610a8ae9',
                indexName: 'scalamenta_mdoc',
                inputSelector: '#search_input_react'
              });
            </script></body></html>